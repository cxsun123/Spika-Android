<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36" version="24.7.14">
  <diagram name="Page-1" id="9361dd3d-8414-5efd-6122-117bd74ce7a7">
    <mxGraphModel dx="2433" dy="1469" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1.5" pageWidth="826" pageHeight="1169" background="none" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="69" value="" style="fillColor=#fad9d5;strokeColor=#ae4132;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="-186" y="-152" width="2650" height="1120" as="geometry" />
        </mxCell>
        <mxCell id="2" value="" style="fillColor=#CC4125;strokeColor=#660000;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="-110" y="175" width="10" height="130" as="geometry" />
        </mxCell>
        <mxCell id="3" value="o/token" style="edgeStyle=none;verticalLabelPosition=top;verticalAlign=bottom;labelPosition=left;align=right;fontSize=15;entryX=0;entryY=0;entryDx=0;entryDy=0;exitX=0.75;exitY=0;exitDx=0;exitDy=0;" parent="1" source="2" target="6" edge="1">
          <mxGeometry width="100" height="100" as="geometry">
            <mxPoint x="-110" y="175" as="sourcePoint" />
            <mxPoint x="40" y="180" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4" value="Webapp" style="shadow=1;fillColor=#A2C4C9;strokeColor=none;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="-165" y="80" width="85" height="50" as="geometry" />
        </mxCell>
        <mxCell id="6" value="" style="fillColor=#CC4125;strokeColor=#660000;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="29" y="175" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="7" value="TokenView&#xa;:django-oauth-toolkit" style="shadow=1;fillColor=#A2C4C9;strokeColor=none;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="-51" y="80" width="150" height="50" as="geometry" />
        </mxCell>
        <mxCell id="8" value="" style="edgeStyle=none;endArrow=none;dashed=1;fontSize=15;" parent="1" source="7" target="6" edge="1">
          <mxGeometry x="272.3350694444445" y="165" width="100" height="100" as="geometry">
            <mxPoint x="16.25887345679007" y="135" as="sourcePoint" />
            <mxPoint x="16.576195987654387" y="190" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="15" value="RipplingOAuthServer" style="shadow=1;fillColor=#A2C4C9;strokeColor=none;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="149" y="80" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="21" value="" style="fillColor=#CC4125;strokeColor=#660000;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="402" y="170" width="10" height="165" as="geometry" />
        </mxCell>
        <mxCell id="22" value="TokenEndpoint&#xa;:oauthlib" style="shadow=1;fillColor=#A2C4C9;strokeColor=none;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="347" y="80" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="23" value="" style="edgeStyle=none;endArrow=none;dashed=1;fontSize=15;" parent="1" source="22" target="21" edge="1">
          <mxGeometry x="614.4878472222224" y="174.99999999999997" width="100" height="100" as="geometry">
            <mxPoint x="301.6527777777778" y="135" as="sourcePoint" />
            <mxPoint x="301.6527777777778" y="285" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="24" value="RipplingTokenExchangeGrant" style="shadow=1;fillColor=#A2C4C9;strokeColor=none;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="500" y="75" width="214" height="50" as="geometry" />
        </mxCell>
        <mxCell id="25" value="" style="edgeStyle=none;endArrow=none;dashed=1;fontSize=15;" parent="1" source="24" target="26" edge="1">
          <mxGeometry x="727.3350694444446" y="165" width="100" height="100" as="geometry">
            <mxPoint x="359.25887345679007" y="130" as="sourcePoint" />
            <mxPoint x="359.5761959876544" y="185" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="26" value="" style="fillColor=#CC4125;strokeColor=#660000;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="602" y="180" width="10" height="475" as="geometry" />
        </mxCell>
        <mxCell id="30" value="TokenExchangeHandlerProxy" style="shadow=1;fillColor=#A2C4C9;strokeColor=none;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="765" y="80" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="33" value="" style="edgeStyle=elbowEdgeStyle;elbow=horizontal;endArrow=none;dashed=1;fillColor=#1ba1e2;strokeColor=#006EAF;fontSize=15;" parent="1" source="4" target="2" edge="1">
          <mxGeometry x="230.00000000000003" y="310" width="100" height="100" as="geometry">
            <mxPoint x="-80" y="435" as="sourcePoint" />
            <mxPoint x="20" y="335" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="49" value="" style="fillColor=#CC4125;strokeColor=#660000;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="865" y="175.67" width="10" height="224.33" as="geometry" />
        </mxCell>
        <mxCell id="50" value="" style="edgeStyle=none;endArrow=none;dashed=1;fontSize=15;" parent="1" source="30" target="49" edge="1">
          <mxGeometry x="956.5711805555559" y="205" width="100" height="100" as="geometry">
            <mxPoint x="506.7361111111113" y="170" as="sourcePoint" />
            <mxPoint x="506.7361111111113" y="349.3942901234568" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="52" value="" style="edgeStyle=none;endArrow=none;dashed=1;fontSize=15;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="W7PPBAMyW4U-8BtLyTJV-120" target="48" edge="1">
          <mxGeometry x="376.5711805555559" y="339.6971450617284" width="100" height="100" as="geometry">
            <mxPoint x="490.7361111111112" y="297.8471450617284" as="sourcePoint" />
            <mxPoint x="490.7361111111112" y="477.2414351851852" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="58" value="" style="fillColor=#CC4125;strokeColor=#660000;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="1100" y="190" width="10" height="214.14" as="geometry" />
        </mxCell>
        <mxCell id="64" value="PartnerTokenExchangeHandler" style="shadow=1;fillColor=#A2C4C9;strokeColor=none;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="995" y="80" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="65" value="" style="edgeStyle=none;endArrow=none;dashed=1;fontSize=15;" parent="1" source="64" target="58" edge="1">
          <mxGeometry x="1174.0711805555559" y="210" width="100" height="100" as="geometry">
            <mxPoint x="657.5" y="135" as="sourcePoint" />
            <mxPoint x="657.5" y="465" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="78" value="token_handler.create_token()" style="text;align=left;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="637" y="399.65999999999997" width="140" height="29.34" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-101" value="" style="edgeStyle=none;endArrow=none;dashed=1;fontSize=15;" parent="1" source="17" edge="1">
          <mxGeometry x="614.4878472222224" y="174.99999999999997" width="100" height="100" as="geometry">
            <mxPoint x="218.5" y="130" as="sourcePoint" />
            <mxPoint x="219" y="265" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="40" value="&#xa;username: email&#xa;grant-type: urn:ietf:params:oauth:grant-type:token-exchange&#xa;scope: rippling_partner_access" style="shape=note;align=left;fontSize=15;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="-176" y="-100" width="420" height="100" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-106" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-70" y="150" as="sourcePoint" />
            <mxPoint x="-60" y="3" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-109" value="" style="edgeStyle=none;endArrow=none;dashed=1;fontSize=15;" parent="1" target="17" edge="1">
          <mxGeometry x="614.4878472222224" y="174.99999999999997" width="100" height="100" as="geometry">
            <mxPoint x="219" y="140" as="sourcePoint" />
            <mxPoint x="219" y="265" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="17" value="" style="fillColor=#CC4125;strokeColor=#660000;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="214.00395061728386" y="175.00429012345683" width="10" height="130" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-112" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=-0.1;entryY=0.612;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="6" target="17" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="79" y="300" as="sourcePoint" />
            <mxPoint x="180" y="255" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-113" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.8;exitY=0.596;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitPerimeter=0;" parent="1" source="17" target="21" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="255" y="254" as="sourcePoint" />
            <mxPoint x="430" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-116" value="&lt;pre style=&quot;color: rgb(255, 255, 255); text-align: right;&quot;&gt;&lt;font color=&quot;#000000&quot; face=&quot;Helvetica&quot;&gt;&lt;span style=&quot;font-size: 15px; white-space-collapse: collapse;&quot;&gt;create_token_response()&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="222" y="195" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-118" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=-0.1;entryY=0.151;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="21" target="26" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="515" y="253" as="sourcePoint" />
            <mxPoint x="530" y="252" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-119" value="&lt;pre style=&quot;color: rgb(255, 255, 255); text-align: right;&quot;&gt;&lt;font color=&quot;#000000&quot; face=&quot;Helvetica&quot;&gt;&lt;span style=&quot;font-size: 15px; white-space-collapse: collapse;&quot;&gt;create_token_response()&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="412" y="210" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-120" value="RipplingBearerToken" style="shadow=1;fillColor=#A2C4C9;strokeColor=none;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="1240" y="79.99999999999997" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-121" value="&lt;pre style=&quot;color: rgb(255, 255, 255); text-align: right;&quot;&gt;&lt;font color=&quot;#000000&quot; face=&quot;Helvetica&quot;&gt;&lt;span style=&quot;font-size: 15px; white-space-collapse: collapse;&quot;&gt;create_token_response()&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="34" y="170" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-123" value="" style="edgeStyle=none;verticalLabelPosition=top;verticalAlign=bottom;labelPosition=left;align=right;fontSize=15;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.625;entryY=0.281;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="26" edge="1">
          <mxGeometry x="110" y="49.5" width="100" height="100" as="geometry">
            <mxPoint x="617" y="250" as="sourcePoint" />
            <mxPoint x="617" y="295" as="targetPoint" />
            <Array as="points">
              <mxPoint x="667" y="250" />
              <mxPoint x="667" y="313" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-124" value="" style="edgeStyle=none;verticalLabelPosition=top;verticalAlign=bottom;labelPosition=left;align=right;fontSize=15;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" parent="1" edge="1">
          <mxGeometry x="110" y="49.5" width="100" height="100" as="geometry">
            <mxPoint x="34" y="182.5" as="sourcePoint" />
            <mxPoint x="34" y="227.5" as="targetPoint" />
            <Array as="points">
              <mxPoint x="84" y="182.5" />
              <mxPoint x="84" y="227.5" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-125" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;validate_token_request()&lt;/pre&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="627" y="254.99999999999997" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-126" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;process_token_request()&lt;/pre&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="637" y="327.5" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-127" value="" style="edgeStyle=none;verticalLabelPosition=top;verticalAlign=bottom;labelPosition=left;align=right;fontSize=15;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" parent="1" edge="1">
          <mxGeometry x="110" y="49.5" width="100" height="100" as="geometry">
            <mxPoint x="617" y="330" as="sourcePoint" />
            <mxPoint x="617" y="375" as="targetPoint" />
            <Array as="points">
              <mxPoint x="667" y="330" />
              <mxPoint x="667" y="375" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-130" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.9;exitY=0.431;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.1;entryY=0.92;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="26" target="49" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="716" y="386" as="sourcePoint" />
            <mxPoint x="860" y="385" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-132" value="" style="endArrow=classic;html=1;rounded=0;entryX=-0.1;entryY=0.906;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="58" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="880" y="385" as="sourcePoint" />
            <mxPoint x="1135" y="385" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-133" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;process_token_request()&lt;/pre&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="895" y="335" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="48" value="" style="fillColor=#CC4125;strokeColor=#660000;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="1310" y="415.6199999999999" width="10" height="119.38" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-139" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;super.create_token()&lt;/pre&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1340" y="385.31000000000006" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-140" value="BearerToken&#xa;:oauthlib" style="shadow=1;fillColor=#A2C4C9;strokeColor=none;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="1490" y="80" width="127" height="59" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-141" value="" style="fillColor=#CC4125;strokeColor=#660000;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="1550" y="429" width="10" height="119.38" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-142" value="" style="edgeStyle=none;endArrow=none;dashed=1;fontSize=15;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" parent="1" source="W7PPBAMyW4U-8BtLyTJV-140" target="W7PPBAMyW4U-8BtLyTJV-141" edge="1">
          <mxGeometry x="376.5711805555559" y="339.6971450617284" width="100" height="100" as="geometry">
            <mxPoint x="1557.5" y="122.14999999999998" as="sourcePoint" />
            <mxPoint x="1568" y="413.15" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-144" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.9;exitY=0.112;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="48" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1360" y="428.15" as="sourcePoint" />
            <mxPoint x="1550" y="430" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-145" value="" style="edgeStyle=none;verticalLabelPosition=top;verticalAlign=bottom;labelPosition=left;align=right;fontSize=15;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" parent="1" edge="1">
          <mxGeometry x="110" y="49.5" width="100" height="100" as="geometry">
            <mxPoint x="1573" y="447.81000000000006" as="sourcePoint" />
            <mxPoint x="1573" y="492.81000000000006" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1623" y="447.81000000000006" />
              <mxPoint x="1623" y="492.81000000000006" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-146" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:9.8pt;&quot;&gt;&lt;pre style=&quot;font-size: 9.8pt; font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace;&quot;&gt;&lt;span style=&quot;&quot;&gt;self&lt;/span&gt;.token_generator()&lt;/pre&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;labelBackgroundColor=none;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="1570" y="445.31" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-147" value=" token = {&#xa;    &#39;access_token&#39;: self.token_generator(request),&#xa;    &#39;expires_in&#39;: expires_in,&#xa;    &#39;token_type&#39;: &#39;Bearer&#39;,&#xa; }" style="shape=note;align=left;fontSize=15;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="1560" y="715" width="360" height="100" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-149" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;self.token_generator = jwt_token_generator&lt;/pre&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1180" y="139.99999999999997" width="350" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-150" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" source="W7PPBAMyW4U-8BtLyTJV-146" target="W7PPBAMyW4U-8BtLyTJV-149" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1460" y="580" as="sourcePoint" />
            <mxPoint x="1420" y="168.14999999999998" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-151" value="" style="edgeStyle=none;verticalLabelPosition=top;verticalAlign=bottom;labelPosition=left;align=right;fontSize=15;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" parent="1" edge="1">
          <mxGeometry x="110" y="49.5" width="100" height="100" as="geometry">
            <mxPoint x="612" y="479.34000000000003" as="sourcePoint" />
            <mxPoint x="612" y="524.34" as="targetPoint" />
            <Array as="points">
              <mxPoint x="662" y="479.34000000000003" />
              <mxPoint x="662" y="524.34" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-152" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;modifier()&lt;/pre&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="614" y="475.00000000000006" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-154" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;request_validator.save_token()&lt;/pre&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="880" y="520" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-155" value="&lt;div style=&quot;background-color:#1e1f22;color:#bcbec4&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:9.8pt;&quot;&gt;&lt;br&gt;&lt;/pre&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1280" y="-30" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-156" value="OAuth2Validator&#xa;:oauth2_provider" style="shadow=1;fillColor=#A2C4C9;strokeColor=none;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="1950" y="90" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-159" value="" style="endArrow=classic;html=1;rounded=0;entryX=-0.2;entryY=0.137;entryDx=0;entryDy=0;exitX=0.6;exitY=0.532;exitDx=0;exitDy=0;exitPerimeter=0;entryPerimeter=0;" parent="1" source="26" target="48" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="610" y="440" as="sourcePoint" />
            <mxPoint x="660" y="390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-161" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=0.303;exitY=0.04;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="W7PPBAMyW4U-8BtLyTJV-147" target="W7PPBAMyW4U-8BtLyTJV-146" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1670" y="700" as="sourcePoint" />
            <mxPoint x="1640" y="520" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-162" value="" style="endArrow=classic;html=1;rounded=0;exitX=1.2;exitY=0.817;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="26" target="W7PPBAMyW4U-8BtLyTJV-168" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="620" y="580" as="sourcePoint" />
            <mxPoint x="1770" y="560" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-163" value="" style="fillColor=#CC4125;strokeColor=#660000;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="2040" y="545" width="10" height="205" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-164" value="" style="edgeStyle=none;endArrow=none;dashed=1;fontSize=15;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="W7PPBAMyW4U-8BtLyTJV-156" target="W7PPBAMyW4U-8BtLyTJV-163" edge="1">
          <mxGeometry x="376.5711805555559" y="339.6971450617284" width="100" height="100" as="geometry">
            <mxPoint x="2049" y="157.34" as="sourcePoint" />
            <mxPoint x="2049" y="270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-168" value="" style="fillColor=#CC4125;strokeColor=#660000;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="1770" y="470" width="10" height="200" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-169" value="" style="edgeStyle=none;endArrow=none;dashed=1;fontSize=15;exitX=0.45;exitY=1.017;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.7;entryY=0.059;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="W7PPBAMyW4U-8BtLyTJV-168" edge="1">
          <mxGeometry x="376.5711805555559" y="339.6971450617284" width="100" height="100" as="geometry">
            <mxPoint x="1773" y="151.01999999999998" as="sourcePoint" />
            <mxPoint x="1785" y="540" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-171" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.117;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="W7PPBAMyW4U-8BtLyTJV-163" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1780" y="570" as="sourcePoint" />
            <mxPoint x="1830" y="520" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-174" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:9.8pt;&quot;&gt;&lt;pre style=&quot;font-size: 9.8pt; font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace;&quot;&gt;save_bear_token()&lt;/pre&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;labelBackgroundColor=none;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="1830" y="520" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-175" value="&lt;div style=&quot;background-color:#1e1f22;color:#bcbec4&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:9.8pt;&quot;&gt;&lt;br&gt;&lt;/pre&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2080" y="550" width="410" height="70" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-177" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;self.limit_token_if_mfa_required()&lt;/pre&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1750" y="610" width="290" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-178" value="" style="edgeStyle=none;verticalLabelPosition=top;verticalAlign=bottom;labelPosition=left;align=right;fontSize=15;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" parent="1" edge="1">
          <mxGeometry x="110" y="49.5" width="100" height="100" as="geometry">
            <mxPoint x="2050" y="659.34" as="sourcePoint" />
            <mxPoint x="2050" y="704.34" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2100" y="659.34" />
              <mxPoint x="2100" y="704.34" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-179" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;self._save_access_token()&lt;/pre&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2065" y="655" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-181" value=" return AccessToken.objects.create(&#xa;            user=request.user,&#xa;            scope=token[&quot;scope&quot;],&#xa;            expires=expires,&#xa;            hashedToken=token[&quot;access_token&quot;],  &#xa;            application=request.client,&#xa;            extras=extras if extras else getattr(request, &#39;extras&#39;, None))" style="shape=note;align=left;fontSize=15;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="1960" y="820" width="450" height="145" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-182" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0;entryY=0;entryDx=220;entryDy=0;entryPerimeter=0;" parent="1" source="W7PPBAMyW4U-8BtLyTJV-179" target="W7PPBAMyW4U-8BtLyTJV-181" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1490" y="630" as="sourcePoint" />
            <mxPoint x="1540" y="580" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-184" value="RipplingOAuth2Validator" style="shadow=1;fillColor=#A2C4C9;strokeColor=none;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="1675" y="80" width="190" height="70" as="geometry" />
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-191" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.561;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.95;entryY=0.945;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="W7PPBAMyW4U-8BtLyTJV-163" target="W7PPBAMyW4U-8BtLyTJV-168" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2140" y="610" as="sourcePoint" />
            <mxPoint x="2190" y="570" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-193" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.9;exitY=0.431;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.1;entryY=0.92;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="612" y="308" as="sourcePoint" />
            <mxPoint x="867" y="305" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-194" value="" style="endArrow=classic;html=1;rounded=0;entryX=-0.1;entryY=0.906;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="881" y="306" as="sourcePoint" />
            <mxPoint x="1100" y="305" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W7PPBAMyW4U-8BtLyTJV-195" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;validate_token_request()&lt;/pre&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="890" y="257.84" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rRgI-piEJR2NT5U421E4-78" value="if client_role:&#xa;    request.user = client_role.user_cache&#xa;    if &quot;rippling_webapp&quot; not in request.scopes:&#xa;        request.scopes.append(&quot;rippling_webapp&quot;)&#xa;    sub = Subject(id=client_role_id, type=SubjectType.ROLE)&#xa;    act = Actor(sub=Subject(id=partner_role_id, type=SubjectType.PROLE))&#xa;    amr = [AMR.PWD]&#xa;    if data.has_mfa:&#xa;        amr.append(AMR.MFA)&#xa;    jwt_payload = build_jwt_payload(request, sub, amr, act)&#xa;    request.jwt_payload = jwt_payload&#xa;" style="shape=note;align=left;fontSize=15;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="884" y="655" width="510" height="210" as="geometry" />
        </mxCell>
        <mxCell id="rRgI-piEJR2NT5U421E4-79" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0.99;entryY=0.8;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="rRgI-piEJR2NT5U421E4-78" target="W7PPBAMyW4U-8BtLyTJV-133">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1010" y="200" as="sourcePoint" />
            <mxPoint x="1090" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
